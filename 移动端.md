# åƒç´ 

### physical pixel

> ä¸€ä¸ªç‰©ç†åƒç´ æ˜¯æ˜¾ç¤ºå™¨(æ‰‹æœºå±å¹•)ä¸Šæœ€å°çš„ç‰©ç†æ˜¾ç¤ºå•å…ƒ,åœ¨æ“ä½œç³»ç»Ÿçš„è°ƒåº¦ä¸‹ï¼Œæ¯ä¸€ä¸ªè®¾å¤‡åƒç´ éƒ½æœ‰è‡ªå·±çš„é¢œè‰²å€¼å’Œäº®åº¦å€¼ã€‚å•ä½ptã€‚

### density-independent pixel

> è®¾å¤‡ç‹¬ç«‹åƒç´ ä¹Ÿç§°ä¸ºå¯†åº¦æ— å…³åƒç´ ï¼Œå¯ä»¥è®¤ä¸ºæ˜¯è®¡ç®—æœºåæ ‡ç³»ç»Ÿä¸­çš„ä¸€ä¸ªç‚¹ï¼Œè¿™ä¸ªç‚¹ä»£è¡¨ä¸€ä¸ªå¯ä»¥ç”±ç¨‹åºä½¿ç”¨çš„è™šæ‹Ÿåƒç´ (æ¯”å¦‚è¯´CSSåƒç´ )ï¼Œç„¶åç”±ç›¸å…³ç³»ç»Ÿè½¬æ¢ä¸ºç‰©ç†åƒç´ ã€‚

### css pixel

> åœ¨ CSSã€JS ä¸­ä½¿ç”¨çš„ä¸€ä¸ªæŠ½è±¡çš„æ¦‚å¿µï¼Œä¸»è¦ç”¨åœ¨æµè§ˆå™¨ä¸Šï¼Œå•ä½æ˜¯ pxã€‚
>
> ä¸€èˆ¬æƒ…å†µä¹‹ä¸‹ï¼ŒCSSåƒç´ ç§°ä¸ºä¸è®¾å¤‡æ— å…³çš„åƒç´ (device-independent pixel)ï¼Œç®€ç§°DIPsï¼Œå•ä½æ˜¯dpã€‚

### Device Pixel Ratio

> ç®€ç§°dprï¼Œå®šä¹‰äº†ç‰©ç†åƒç´ å’Œè®¾å¤‡ç‹¬ç«‹åƒç´ çš„å¯¹åº”å…³ç³»

```
è®¾å¤‡åƒç´ æ¯” ï¼ ç‰©ç†åƒç´  / è®¾å¤‡ç‹¬ç«‹åƒç´   //x,yæ–¹å‘ä¸Š
window.devicePixelRatio
```

### Pixel Per Inch

> å±å¹•æ¯è‹±å¯¸çš„åƒç´ æ•°é‡ï¼Œå³å•ä½è‹±å¯¸å†…çš„åƒç´ å¯†åº¦
>
> PPIè¶Šé«˜ï¼Œåƒç´ æ•°è¶Šé«˜ï¼Œå›¾åƒè¶Šæ¸…æ™°ï¼Œå³ä»£è¡¨æ˜¾ç¤ºå±èƒ½å¤Ÿä»¥è¶Šé«˜çš„å¯†åº¦æ˜¾ç¤ºå›¾åƒ

![ppi](ppi.png)

- ä¸€ä¸ªğŸŒ°

  ![](retina.png)

  ï¼ˆå›¾ä¾µåˆ ï¼‰

  åœ¨ä¸åŒçš„å±å¹•ä¸Š(æ™®é€šå±å¹• vs retinaå±å¹•)ï¼Œcssåƒç´ æ‰€å‘ˆç°çš„å¤§å°(ç‰©ç†å°ºå¯¸)æ˜¯ä¸€è‡´çš„ï¼Œä¸åŒçš„æ˜¯1ä¸ªcssåƒç´ æ‰€å¯¹åº”çš„ç‰©ç†åƒç´ ä¸ªæ•°æ˜¯ä¸ä¸€è‡´çš„

  cssä¸­çš„1pxå¹¶ä¸æ˜¯ä»£è¡¨å±å¹•ä¸Šçš„1pxï¼Œåˆ†è¾¨ç‡è¶Šå¤§ï¼Œcssä¸­1pxä»£è¡¨çš„ç‰©ç†åƒç´ å°±ä¼šè¶Šå¤šï¼ŒdevicePixelRatioçš„å€¼ä¹Ÿè¶Šå¤§

## viewport

> åœ¨æ¡Œé¢æµè§ˆå™¨ä¸­ï¼Œviewportå°±æ˜¯æµè§ˆå™¨çª—å£çš„å®½åº¦é«˜åº¦ã€‚ä½†åœ¨ç§»åŠ¨ç«¯è®¾å¤‡ä¸Šå°±æœ‰ç‚¹å¤æ‚ã€‚
>
> ç§»åŠ¨ç«¯çš„viewportå¤ªçª„ï¼Œä¸ºäº†èƒ½æ›´å¥½ä¸ºCSSå¸ƒå±€æœåŠ¡ï¼Œæ‰€ä»¥æä¾›äº†ä¸¤ä¸ªviewport:è™šæ‹Ÿçš„viewportï¼švisualviewportå’Œå¸ƒå±€çš„viewportï¼šlayoutviewportã€‚

### visual viewport

> è§†è§‰è§†å£ï¼Œç‰©ç†å¯è§†åŒ–åŒºåŸŸ

### layout viewport

> iPhone ä¸Šçš„ Safari ä½¿ç”¨ 980pxã€Opera 850pxï¼Œå®‰å“çš„ Webkit æ ¸å¿ƒ 800pxï¼ŒIE974pxã€‚æµè§ˆå™¨å·²ç»é€‰æ‹©å¥½ä»–ä»¬çš„layoutviewportçš„å°ºå¯¸ï¼Œå®ƒå®Œæ•´çš„è¦†ç›–äº†æœ€å°ç¼©æ”¾æ¨¡å¼ä¸‹çš„ç§»åŠ¨æµè§ˆå™¨çš„å±å¹•ã€‚

```document.documentElement.clientWidth/Height```

### ideal viewport

> ideal viewport çš„æ„ä¹‰åœ¨äºï¼Œæ— è®ºåœ¨ä½•ç§åˆ†è¾¨ç‡çš„å±å¹•ä¸‹ï¼Œä¸éœ€è¦ç”¨æˆ·æ‰‹åŠ¨ç¼©æ”¾ï¼Œä¹Ÿä¸éœ€è¦å‡ºç°æ¨ªå‘æ»šåŠ¨æ¡ï¼Œéƒ½å¯ä»¥å®Œç¾çš„å‘ˆç°ç»™ç”¨æˆ·ã€‚

## Viewport meta

```<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">```

- widthï¼šlayout viewportçš„å®½åº¦ï¼Œä¸ºä¸€ä¸ªæ­£æ•´æ•°ï¼Œæˆ–å­—ç¬¦ä¸²"device-width"

- initial-scaleï¼šåˆå§‹ç¼©æ”¾æ¯”ä¾‹

- maximum-scaleï¼šå…è®¸ç¼©æ”¾çš„æœ€å¤§æ¯”ä¾‹

- minimum-scaleï¼šå…è®¸ç¼©æ”¾çš„æœ€å°æ¯”ä¾‹

- user-scalableï¼šæ˜¯å¦å…è®¸æ‰‹åŠ¨ç¼©æ”¾

  http://www.cnblogs.com/2050/p/3877280.html

## csså•ä½rem 

> åœ¨[w3c](https://www.w3.org/TR/css3-values/#rem)ä¸Šæ˜¯è¿™æ ·æè¿°remçš„ï¼š
>
> Equal to the computed value ofÂ [font-size](https://drafts.csswg.org/css-fonts-3/#propdef-font-size)Â on the root element.Â 

ğŸŒ°ï¼šå¦‚æœhtml çš„font-sizeæ˜¯12,ä¸€ä¸ªdivçš„widthæ˜¯1rem,é‚£ä¹ˆè¿™ä¸ªdivçš„widthå°±æ˜¯12px;

## remå¸ƒå±€

æˆ‘ä»¬è¦åšçš„å°±æ˜¯ï¼š**é’ˆå¯¹ä¸åŒæ‰‹æœºå±å¹•å°ºå¯¸å’ŒdpråŠ¨æ€çš„æ”¹å˜æ ¹èŠ‚ç‚¹htmlçš„font-sizeå¤§å°(åŸºå‡†å€¼)**ã€‚

ä¾ç…§æŸç‰¹å®šå®½åº¦è®¾å®š rem å€¼ï¼ˆå³ html çš„ font-sizeï¼‰ï¼Œé¡µé¢ä»»ä½•éœ€è¦å¼¹æ€§é€‚é…çš„å…ƒç´ ï¼Œå°ºå¯¸å‡æ¢ç®—ä¸º rem è¿›è¡Œå¸ƒå±€ï¼›å½“é¡µé¢æ¸²æŸ“æ—¶ï¼Œæ ¹æ®é¡µé¢æœ‰æ•ˆå®½åº¦è¿›è¡Œè®¡ç®—ï¼Œè°ƒæ•´ rem çš„å¤§å°ï¼ŒåŠ¨æ€ç¼©æ”¾ä»¥è¾¾åˆ°é€‚é…çš„æ•ˆæœã€‚

```
rem = px / åŸºå‡†å€¼;
```

### cssåª’ä½“æŸ¥è¯¢

> åª’ä½“æŸ¥è¯¢å¯ç”¨äºæ ¹æ®è®¾å¤‡ç‰¹ç‚¹åº”ç”¨æ ·å¼ã€‚

```css
@media mediatype and|not|only (media feature) {
    CSS-Code;
}
html{font-size: 32px;}
//iphone 6 
@media (min-device-width : 375px) {
   html{font-size: 64px;}
}
```

ç¼ºç‚¹ï¼šé€šè¿‡è®¾å¤‡å®½åº¦èŒƒå›´åŒºé—´è¿™æ ·çš„åª’ä½“æŸ¥è¯¢æ¥åŠ¨æ€æ”¹å˜remåŸºå‡†å€¼ï¼Œå…¶å®ä¸å¤Ÿç²¾ç¡®

### jsåŠ¨æ€æ”¹å˜<meta>æ ‡ç­¾

> åœ¨æ•´ä¸ªæ‰‹æ·˜å›¢é˜Ÿï¼Œæœ‰ä¸€ä¸ªåå«[`lib-flexible`](https://github.com/amfe/lib-flexible)çš„åº“ï¼Œè€Œè¿™ä¸ªåº“å°±æ˜¯ç”¨æ¥è§£å†³H5é¡µé¢ç»ˆç«¯é€‚é…çš„ã€‚

```javascript
var metaEl = doc.createElement('meta');
var scale = isRetina ? 0.5:1;
metaEl.setAttribute('name', 'viewport');
metaEl.setAttribute('content', 'initial-scale=' + scale + ', maximum-scale=' + scale + ', minimum-scale=' + scale + ', user-scalable=no');
if (docEl.firstElementChild) {
    document.documentElement.firstElementChild.appendChild(metaEl);
} else {
    var wrap = doc.createElement('div');
    wrap.appendChild(metaEl);
    documen.write(wrap.innerHTML);
}
```

- åŠ¨æ€æ”¹å†™`meta`æ ‡ç­¾

- ç»™å…ƒç´ æ·»åŠ `data-dpr`å±æ€§ï¼Œå¹¶ä¸”åŠ¨æ€æ”¹å†™`data-dpr`çš„å€¼

- ç»™å…ƒç´ æ·»åŠ `font-size`å±æ€§ï¼Œå¹¶ä¸”åŠ¨æ€æ”¹å†™`font-size`çš„å€¼

  #### ä»è§†è§‰ç¨¿ä¸­çš„pxåˆ°rem

  > ç›®å‰Flexibleä¼šå°†è§†è§‰ç¨¿åˆ†æˆ100ä»½ï¼Œè€Œæ¯ä¸€ä»½è¢«ç§°ä¸ºä¸€ä¸ªå•ä½`a`ã€‚åŒæ—¶`1rem`å•ä½è¢«è®¤å®šä¸º`10a`

  ```
  rem = document.documentElement.clientWidth * dpr / 10
  ```

[ä½¿ç”¨Flexibleå®ç°æ‰‹æ·˜H5é¡µé¢çš„ç»ˆç«¯é€‚é…](https://github.com/amfe/article/issues/17)

### å­—ä½“å¤§å°é—®é¢˜

æˆ‘ä»¬å¸Œæœ›åœ¨ä»»ä½•å±å¹•ä¸‹å­—ä½“å¤§å°ç»Ÿä¸€ï¼Œremå¹¶ä¸é€‚åˆç”¨åˆ°æ–‡æœ¬ä¸Šï¼Œè¿˜æ˜¯ä½¿ç”¨pxä½œä¸ºå•ä½

```css
div {
    width: 1rem; 
    height: 0.4rem;
    font-size: 12px; // é»˜è®¤å†™ä¸Šdprä¸º1çš„fontSize
}
[data-dpr="2"] div {
    font-size: 24px;
}
[data-dpr="3"] div {
    font-size: 36px;
}
```

## å‚è€ƒæ–‡ç« 

- http://www.cnblogs.com/skylar/p/mobile.html
- https://segmentfault.com/a/1190000002546941
- http://www.cnblogs.com/2050/p/3877280.html
- http://webdesign.tutsplus.com/zh-hans/articles/quick-tip-dont-forget-the-viewport-meta-tag--webdesign-5972
- https://developer.mozilla.org/zh-CN/docs/Web/Guide/CSS/Media_queries
- http://html-js.com/article/MobileWeb
- https://github.com/riskers/blog/issues/18
- http://www.cnblogs.com/lyzg/p/4877277.html
- http://sentsin.com/web/1212.html